(window["webpackJsonpfriend-requests-exploration"]=window["webpackJsonpfriend-requests-exploration"]||[]).push([[0],{12:function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return L})),n.d(t,"c",(function(){return m}));var r=n(239),a=n.n(r),u=n(143),c=n(4);function i(e,t,n,r){return new(n||(n=Promise))((function(a,u){function c(e){try{o(r.next(e))}catch(t){u(t)}}function i(e){try{o(r.throw(e))}catch(t){u(t)}}function o(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(c,i)}o((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,a,u,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function i(u){return function(i){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return c.label++,{value:u[1],done:!1};case 5:c.label++,r=u[1],u=[0];continue;case 7:u=c.ops.pop(),c.trys.pop();continue;default:if(!(a=(a=c.trys).length>0&&a[a.length-1])&&(6===u[0]||2===u[0])){c=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){c.label=u[1];break}if(6===u[0]&&c.label<a[1]){c.label=a[1],a=u;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(u);break}a[2]&&c.ops.pop(),c.trys.pop();continue}u=t.call(e,c)}catch(i){u=[6,i],r=0}finally{n=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,i])}}}var s=Object(c.graph)(),l=new c.Fetcher(s,void 0),f=new c.UpdateManager(s);function d(){return s}function m(){s=Object(c.graph)()}function p(){return l}function b(){return f}function h(e,t){return new Promise((function(n,r){b().update(e,t,(function(e,t,a){return t?n():r(new Error(a))}))}))}var v=function(e,t,n,r){return function(e,t,n,r,a,u){var i=n?Object(c.sym)(n):null,o=r?Object(c.sym)(r):null,s=a?Object(c.sym)(a):null,l=Object(c.sym)(u),f=e.statementsMatching(i,o,s,l,!0)[0];if(!f||!f[t])return null;return j(f[t])}(e,"subject",null,t,n,r)},g=function(e,t,n,r){return w(e,"subject",null,t,n,r)},y=function(e,t,n,r){return w(e,"object",t,n,null,r)};function w(e,t,n,r,a,u){var i=n?Object(c.sym)(n):null,o=r?Object(c.sym)(r):null,s=a?Object(c.sym)(a):null,l=Object(c.sym)(u);return e.statementsMatching(i,o,s,l,!1).map((function(e){return j(e[t])})).filter(E)}function j(e){return"string"===typeof e.uri?e.uri:D(e)?e:null}function E(e){return null!==e}function N(e){var t=parseInt(e.value.substring(0,4),10),n=parseInt(e.value.substring(5,7),10)-1,r=parseInt(e.value.substring(8,10),10),a=parseInt(e.value.substring(11,13),10),u=parseInt(e.value.substring(14,16),10),c=parseInt(e.value.substring(17,e.value.indexOf("Z")),10),i=new Date(0);return i.setUTCFullYear(t),i.setUTCMonth(n),i.setUTCDate(r),i.setUTCHours(a),i.setUTCMinutes(u),i.setUTCSeconds(c),i}function O(e){return parseInt(e.value,10)}function x(e){return parseFloat(e.value)}function S(e){return e.value}function k(e){return W(e)?N(e):U(e)?O(e):q(e)?x(e):e.value}function R(e){return e instanceof Date?c.Literal.fromDate(e):"number"===typeof e?c.Literal.fromNumber(e):new c.Literal(e,void 0,void 0)}function I(e){return A(e,{existsOnPod:!1})}function L(e){return i(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return[4,p().load(e)];case 1:return t=r.sent(),n=T(t,e),[2,A(e,{aclRef:n,existsOnPod:!0})]}}))}))}function T(e,t){var n,r=e.headers.get("Link");if(r){var u=a.a.parse(r).get("rel","acl");1===u.length&&(n=new URL(u[0].uri,t).href)}return n}function A(e,t){var n=this,r=new URL(e),a=r.origin+r.pathname+r.search,s=function(){return t.aclRef||null},l={},f=function(e){return l[e]||(l[e]=function(e,t){var n=d(),r=[],a=[],i=function(r){return y(n,t,r,e.asNodeRef())},o=function(e){var t=i(e).find(G);return"undefined"===typeof t?null:t},s=function(n,a){r.push(Object(c.st)(Object(c.sym)(t),Object(c.sym)(n),R(a),Object(c.sym)(e.asNodeRef())))},l=function(n,a){r.push(Object(c.st)(Object(c.sym)(t),Object(c.sym)(n),Object(c.sym)(a),Object(c.sym)(e.asNodeRef())))},f=function(r){a.push.apply(a,n.statementsMatching(Object(c.sym)(t),Object(c.sym)(r),null,Object(c.sym)(e.asNodeRef())))};return{getDocument:function(){return e},getStatements:function(){return n.statementsMatching(Object(c.sym)(t),null,null,Object(c.sym)(e.asNodeRef()))},getString:function(e){var t=i(e).find(C);return"undefined"===typeof t?null:t.value},getInteger:function(e){var t=i(e).find(U);return"undefined"===typeof t?null:O(t)},getDecimal:function(e){var t=i(e).find(q);return"undefined"===typeof t?null:x(t)},getDateTime:function(e){var t=i(e).find(W);return"undefined"===typeof t?null:N(t)},getLiteral:function(e){var t=i(e).find(D);return"undefined"===typeof t?null:k(t)},getAllStrings:function(e){return i(e).filter(C).map(S)},getAllIntegers:function(e){return i(e).filter(U).map(O)},getAllDecimals:function(e){return i(e).filter(q).map(x)},getAllDateTimes:function(e){return i(e).filter(W).map(N)},getAllLiterals:function(e){return i(e).filter(D).map(k)},getNodeRef:o,getAllNodeRefs:function(e){return i(e).filter(G)},getType:function(){return o(u.a.type)},addLiteral:s,addNodeRef:l,removeAll:f,removeLiteral:function(n,r){a.push(Object(c.st)(Object(c.sym)(t),Object(c.sym)(n),R(r),Object(c.sym)(e.asNodeRef())))},removeNodeRef:function(n,r){a.push(Object(c.st)(Object(c.sym)(t),Object(c.sym)(n),Object(c.sym)(r),Object(c.sym)(e.asNodeRef())))},setLiteral:function(e,t){f(e),s(e,t)},setNodeRef:function(e,t){f(e),l(e,t)},getPendingStatements:function(){return[a,r]},onSave:function(){a=[],r=[]},asNodeRef:function(){return t}}}(p,e)),l[e]},m=function(e,t){return P(g,a)(e,t).filter(G).map(f)},p={addSubject:function(e){var t=void 0===e?{}:e,n=t.identifier,r=void 0===n?M():n,u=t.identifierPrefix;return f(a+"#"+(void 0===u?"":u)+r)},getSubject:f,getSubjectsOfType:function(e){return m(u.a.type,e)},findSubject:function(e,t){var n=F(v,a)(e,t);return!n||D(n)?null:f(n)},findSubjects:m,getAcl:s,getAclRef:s,asNodeRef:function(){return a},save:function(e){return void 0===e&&(e=Object.values(l)),i(n,void 0,void 0,(function(){var n,r,u,c,i,s;return o(this,(function(o){switch(o.label){case 0:return n=e.filter((function(e){return e.getDocument().asNodeRef()===a})),r=n.reduce((function(e,t){var n=e[0],r=e[1],a=t.getPendingStatements(),u=a[0],c=a[1];return[n.concat(u),r.concat(c)]}),[[],[]]),u=r[0],c=r[1],t.existsOnPod?[3,2]:[4,(l=a,f=c,new Promise((function(e,t){var n=d(),r=b(),a=n.sym(l);r.put(a,f,"text/turtle",(function(n,r,a,u){return r?e(u):t(new Error(a))}))})))];case 1:return i=o.sent(),(s=T(i,a))&&(t.aclRef=s),t.existsOnPod=!0,[3,4];case 2:return[4,h(u,c)];case 3:o.sent(),o.label=4;case 4:return n.forEach((function(e){return e.onSave()})),[2,n]}var l,f}))}))}};return p}var F=function(e,t){var n=d();return function(r,a){return e(n,r,a,t)}},P=function(e,t){var n=d();return function(r,a){return e(n,r,a,t)}},M=function(){return Date.now().toString()+Math.random().toString().substring("0.".length)};function D(e){return"object"===typeof e&&null!==e&&"string"===typeof e.termType&&"Literal"===e.termType}function C(e){return D(e)&&"http://www.w3.org/2001/XMLSchema#string"===e.datatype.uri}function U(e){return D(e)&&"http://www.w3.org/2001/XMLSchema#integer"===e.datatype.uri}function q(e){return D(e)&&"http://www.w3.org/2001/XMLSchema#decimal"===e.datatype.uri}function W(e){return D(e)&&"http://www.w3.org/2001/XMLSchema#dateTime"===e.datatype.uri}function G(e){return"string"===typeof e&&!D(e)}},242:function(e,t,n){e.exports=n(482)},247:function(e,t,n){},256:function(e,t){},258:function(e,t,n){var r={"./N3Lexer":105,"./N3Lexer.js":105,"./N3Parser":106,"./N3Parser.js":106,"./N3Store":151,"./N3Store.js":151,"./N3StreamParser":152,"./N3StreamParser.js":152,"./N3StreamWriter":158,"./N3StreamWriter.js":158,"./N3Util":107,"./N3Util.js":107,"./N3Writer":111,"./N3Writer.js":111};function a(e){var t=u(e);return n(t)}function u(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=u,e.exports=a,a.id=258},260:function(e,t){},262:function(e,t){},290:function(e,t){},292:function(e,t){},336:function(e,t){},338:function(e,t){},390:function(e,t){},391:function(e,t){},452:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=452},482:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(236),c=n.n(u),i=(n(247),n(103)),o=n(41),s=n(19),l=n(3),f=n.n(l),d=n(15),m=n(237),p=n(238),b=n(102),h=n(12),v=n(1),g=n(24),y=n.n(g),w=n(101),j=function(){function e(t){Object(m.a)(this,e),this.url=void 0,this.webId=void 0,this.name=void 0,this.picture=void 0,this.url=t}return Object(p.a)(e,[{key:"fetchAndParse",value:function(){var e=Object(d.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)(this.url);case 2:if(null===(t=e.sent)){e.next=10;break}if(0!==(n=t.getSubjectsOfType(v.e.BefriendAction)).length){e.next=7;break}return e.abrupt("return");case 7:n.length>1&&console.warn("Notification contains ".concat(n.length," schema.BefriendActions, only first one used.")),r=n[0],this.webId=r.getNodeRef(v.e.agent)||void 0;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchProfile",value:function(){var e=Object(d.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.webId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(h.b)(this.webId);case 5:t=e.sent,n=t.getSubject(this.webId),this.name=n.getString(v.h.fn),this.picture=n.getNodeRef(v.h.hasPhoto),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(2),console.error("failed to fetch profile for friend request",this.webId),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function E(e){return N.apply(this,arguments)}function N(){return(N=Object(d.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)(t);case 2:return n=e.sent,r=n.getSubject(t),a=r.getNodeRef(v.c.inbox),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return x.apply(this,arguments)}function x(){return(x=Object(d.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)(t);case 2:return n=e.sent,r=n.getSubject(""),e.abrupt("return",r.getAllNodeRefs(v.c.contains));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return k.apply(this,arguments)}function k(){return(k=Object(d.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:return e.next=7,O(n);case 7:return r=e.sent,e.abrupt("return",Promise.all(r.map(function(){var e=Object(d.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new j(t),e.next=3,n.fetchAndParse();case 3:return e.next=5,n.fetchProfile();case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return I.apply(this,arguments)}function I(){return(I=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.fetch(t,{method:"DELETE"});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return T.apply(this,arguments)}function T(){return(T=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t.url);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(f.a.mark((function e(t){var n,r,a,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.currentSession();case 2:if((n=e.sent)&&n.webId){e.next=5;break}throw new Error("cannot add friend, you are not logged in!");case 5:return e.next=7,Object(w.a)(v.h.Individual);case 7:if(r=e.sent){e.next=10;break}throw new Error("cannot add friend, you do not have a Friends addressbook yet!");case 10:if(a=r.getSubjectsOfType(v.h.Group),!1,u=a.find((function(e){return"Friends"===e.getString(v.h.fn)}))){e.next=15;break}throw new Error("you have an addressbook but no Friends group!");case 15:return u.addNodeRef(v.h.hasMember,t),e.next=18,r.save();case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.webId){e.next=2;break}throw new Error("webId unknown from friend request!");case 2:return e.next=4,A(t.webId);case 4:return e.next=6,L(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(){var e=Object(b.a)(),t=a.a.useState(),n=Object(s.a)(t,2),r=n[0],u=n[1],c=a.a.useState([]),i=Object(s.a)(c,2),o=i[0],l=i[1],m=a.a.useState([]),p=Object(s.a)(m,2),v=p[0],g=p[1];function y(){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,S(e).then((function(e){var t=[];e.forEach((function(e){e.name&&e.picture&&e.webId&&t.push(e)})),u(t)}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return a.a.useEffect((function(){o.length&&Promise.all(o.map((function(e){return function(e){return P.apply(this,arguments)}(e)}))).then((function(){l([]),Object(h.c)(),y()}))}),[o]),a.a.useEffect((function(){v.length&&Promise.all(v.map((function(e){return function(e){return M.apply(this,arguments)}(e)}))).then((function(){g([]),Object(h.c)(),y()}))}),[v]),a.a.useEffect((function(){y()}),[e]),a.a.createElement(a.a.Fragment,null,r?r.length?r.map((function(e,t){return a.a.createElement("li",{key:e.url},a.a.createElement("p",null,'Friend request from "',e.name,'"'),a.a.createElement("figure",{className:"image is-128x128"},a.a.createElement("img",{src:e.picture||""})),a.a.createElement("input",{type:"hidden",name:"webId",value:"{item.webId}"}),a.a.createElement("button",{type:"submit",className:"button is-primary",onClick:function(){return t=e,void l((function(e){return e.concat(t)}));var t}},"Accept"),a.a.createElement("button",{type:"submit",className:"button is-warning",onClick:function(){return t=e,void g((function(e){return e.concat(t)}));var t}},"Reject"))})):"Inbox zero :)":"Loading friend requests ...")};function C(){return(C=Object(d.a)(f.a.mark((function e(){var t,n,r,a,u,c,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.currentSession();case 2:if((t=e.sent)&&t.webId){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,Object(w.a)(v.h.Individual);case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return",null);case 10:if(0!==(r=n.getSubjectsOfType(v.h.Group)).length){e.next=29;break}return(a=n.addSubject()).addNodeRef(v.d.type,v.h.Group),a.addLiteral(v.h.fn,"Friends"),e.next=17,n.save();case 17:if(!(u=n.getAclRef())){e.next=28;break}return e.prev=19,e.next=22,Object(h.b)(u);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(19),c=Object(h.a)(u);case 27:c&&((i=c.addSubject()).addNodeRef(v.d.type,v.a.Authorization),i.addNodeRef(v.a.accessTo,n.asNodeRef()),i.addNodeRef(v.a.mode,v.a.Read),i.addNodeRef(v.a.mode,v.a.Append),i.addNodeRef(v.a.mode,v.a.Write),i.addNodeRef(v.a.mode,v.a.Control),i.addNodeRef(v.a.agent,t.webId),(o=c.addSubject()).addNodeRef(v.d.type,v.a.Authorization),o.addNodeRef(v.a.accessTo,n.asNodeRef()),o.addNodeRef(v.a.mode,v.a.Read),o.addNodeRef(v.a.agentGroup,a.asNodeRef()),c.save());case 28:r.push(a);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,null,[[19,24]])})))).apply(this,arguments)}var U=function(e){var t=a.a.useState(""),n=Object(s.a)(t,2),r=n[0],u=n[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSelect(r),u("")}},a.a.createElement("div",{className:"field"},a.a.createElement("div",{className:"control"},a.a.createElement("input",{className:"input is-large",onChange:function(e){u(e.target.value)},value:r,type:"url",name:"webid",id:"webid"}))),a.a.createElement("div",{className:"field"},a.a.createElement("div",{className:"control"},a.a.createElement("button",{type:"submit",className:"button is-primary"},"Add")))))},q=function(e){var t=a.a.useState(),n=Object(s.a)(t,2),r=n[0],u=n[1];a.a.useEffect((function(){Object(h.b)(e.webId).then((function(t){u(t.getSubject(e.webId))}))}),[e.webId]);var c=r?a.a.createElement(W,{subject:r}):a.a.createElement("code",null,e.webId);return a.a.createElement(a.a.Fragment,null,c)},W=function(e){var t=e.subject,n=t.getNodeRef(v.h.hasPhoto)?a.a.createElement(a.a.Fragment,null,a.a.createElement("figure",{className:"media-left"},a.a.createElement("p",{className:"image is-64x64"},a.a.createElement("img",{src:t.getNodeRef(v.h.hasPhoto),alt:"Avatar",className:"is-rounded"})))):null;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"media"},n,a.a.createElement("div",{className:"media-content"},a.a.createElement("p",{className:"content"},a.a.createElement(i.b,{to:"/profile/".concat(encodeURIComponent(t.asNodeRef())),title:"View this person's friends"},t.getLiteral(v.b.name)||t.getLiteral(v.h.fn)||t.asNodeRef())))))};function G(){return(G=Object(d.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.currentSession();case 2:if((n=e.sent)&&n.webId){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,E(t);case 7:if(r=e.sent){e.next=10;break}throw new Error("friend has no inbox?");case 10:y.a.fetch(r,{method:"POST",body:"@prefix schema: <http://schema.org/> .\n    <> a schema:BefriendAction ;\n       schema:agent <".concat(n.webId,"> ."),headers:{"Content-Type":"text/turtle"}});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=function(e){var t=a.a.useState([]),n=Object(s.a)(t,2),r=n[0],u=n[1],c=a.a.useState([]),i=Object(s.a)(c,2),o=i[0],l=i[1];a.a.useEffect((function(){var t=r.filter((function(e){return!o.includes(e)}));0!==t.length&&(t.forEach((function(t){e.friendlist.addNodeRef(v.h.hasMember,t),function(e){return G.apply(this,arguments)}(t).then((function(){console.log("Friend request sent",t)}))})),e.friendlist.getDocument().save().then((function(){l((function(e){return e.concat(t)}))})))}),[r,o,e.friendlist]);var f=e.friendlist.getAllNodeRefs(v.h.hasMember),d=a.a.useMemo((function(){return 0===f.length?a.a.createElement("p",null,"You have not added any friends yet :("):f.map(X)}),[o,f]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",{className:"title"},e.friendlist.getLiteral(v.h.fn)),a.a.createElement("section",{className:"section"},d),a.a.createElement("section",{className:"section"},a.a.createElement(U,{onSelect:function(e){u((function(t){return t.concat(e)}))}})))};function X(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{key:e,className:"card"},a.a.createElement("div",{className:"section"},a.a.createElement(q,{webId:e}))))}var _=function(){var e=Object(b.a)(),t=a.a.useState(),n=Object(s.a)(t,2),r=n[0],u=n[1];if(a.a.useEffect((function(){e&&function(){return C.apply(this,arguments)}().then((function(e){e&&u(e)}))}),[e]),!r)return a.a.createElement(a.a.Fragment,null,"Loading friends list\u2026");var c=r.map((function(e,t){return a.a.createElement(B,{key:"friendlist"+t,friendlist:e})}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("section",{className:"section"},c))},z=n(484),J=n(483),Y=n(485);function H(){return(H=Object(d.a)(f.a.mark((function e(t){var n,r,a,u,c,i,o,s,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)(t);case 2:if(n=e.sent,r=n.getSubject(t),a=r.getNodeRef(v.f.publicTypeIndex)){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,Object(h.b)(a);case 9:if(u=e.sent,c=u.findSubject(v.f.forClass,v.h.Individual)){e.next=13;break}return e.abrupt("return",null);case 13:if(i=c.getNodeRef(v.f.instance)){e.next=16;break}return e.abrupt("return",null);case 16:return e.next=18,Object(h.b)(i);case 18:return o=e.sent,s=o.getSubjectsOfType(v.h.Group),l=s.map((function(e){return{name:e.getString(v.h.fn),contacts:e.getAllNodeRefs(v.h.hasMember)}})),e.abrupt("return",l);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(e){var t=Object(o.f)(),n=decodeURIComponent(t.webId),r=a.a.useState(),u=Object(s.a)(r,2),c=u[0],i=u[1];if(a.a.useEffect((function(){(function(e){return H.apply(this,arguments)})(n).then((function(e){if(null!==e){var t=e.reduce((function(e,t){return t.contacts.forEach((function(t){return e.add(t)})),e}),new Set);i(Array.from(t.values()))}else i(null)}))}),[n]),null===c)return a.a.createElement(a.a.Fragment,null,a.a.createElement("section",{className:"section"},a.a.createElement("p",{className:"content"},"This person does not have any friends that are visible to you.")));if(void 0===c)return a.a.createElement(a.a.Fragment,null,a.a.createElement("section",{className:"section"},a.a.createElement("p",{className:"content"},"Loading\u2026")));var l=c.map((function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("section",{className:"section"},a.a.createElement("div",{key:e,className:"card"},a.a.createElement("div",{className:"section"},a.a.createElement(q,{webId:e})))))}));return a.a.createElement(a.a.Fragment,null,l)},Z=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,null,a.a.createElement(z.a,null,a.a.createElement("section",{className:"section"},a.a.createElement("p",{className:"content"},"This app requires you to log in. It requires ",a.a.createElement("b",null,"Control")," access."),a.a.createElement(J.a,{popup:"popup.html",className:"button is-large is-primary"},"Log in to start using"))),a.a.createElement(Y.a,null,a.a.createElement(o.c,null,a.a.createElement(o.a,{path:"/profile/:webId"},a.a.createElement(V,null)),a.a.createElement(o.a,{path:"/"},a.a.createElement("div",{className:"panel"},a.a.createElement(D,null)),a.a.createElement("div",{className:"panel"},a.a.createElement(_,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[242,1,2]]]);
//# sourceMappingURL=main.2f002a99.chunk.js.map